## Quick orientation for AI coding agents

This is a Jekyll site using the "Minimal Mistakes" theme customized for the VID Lab.
Focus on content (Markdown) and small Liquid/HTML templates. Key project roots:

- `_config.yml` — primary site configuration and collections (see `collections: people, publications`).
- `Rakefile` & `Gemfile` — project tasks and gem dependencies. Use `bundle` / `bundle exec rake` for dev tasks.
- `_layouts/` and `_includes/` — primary templates. Example: `_layouts/publication.html` renders `page.bib`, `page.authors` and looks up people by key.
- `_people/` and `_publications/` — collections with strict front-matter expectations. See `_publications/README.md` and `_people/README.md` for templates.

What’s important and actionable

- Use Bundler for Ruby/Jekyll work: install with `bundle install`. Preview with `bundle exec rake preview` which starts a local test server at `http://localhost:4000/test/` (see `Rakefile`).
- Many site artifacts are generated by Rake tasks (js bundling, copyright text, README version updates). Use `bundle exec rake` or specific tasks like `bundle exec rake js`.
- Do not change `package.json` version without running the Rake `:version` flow — the project expects `package.json` as the source-of-truth for theme version.

Content conventions and examples

- Publications: front-matter MUST include `title`, `authors` (list of person keys or strings), `bibentry`, and `year`. Files live under `_publications/`. Example rendering code is in `_layouts/publication.html` (it resolves `page.authors` against `site.people`).
- People: use lowercase `key` filenames in `_people/`. Fields commonly referenced: `first_name`, `last_name`, `title`, `image`. See `_people/README.md` for template.
- Filenames/keys: publications use `YYYY_shortname` pattern (e.g., `2023_chi_troubling.md`). Use consistent keys for assets (PDFs, images) as described in `_publications/README.md`.

Template and Liquid patterns to follow

- Lookup pattern: publication author entries may be a person key; `_layouts/publication.html` searches `site.people` for a matching `p.key`. Follow that pattern when adding people/publication links.
- Use `relative_url` on internal links (examples: `{{ page.pdf | relative_url }}`). Prefer relative_url for internal assets.
- Keep layout responsibilities separate: `layout: single` handles the page title; `publication.html` expects title already rendered — do not add an extra <h1>.

Build, debug and smoke checks for edits

- Quick local preview: `bundle install && bundle exec rake preview` then open `http://localhost:4000/test/`.
- Static build: `jekyll build --trace` or via `bundle exec rake` tasks if you modify generated files (see `Rakefile`). Use `--trace` for Liquid/Jekyll errors.
- JS rebuild: `bundle exec rake js` (Rake calls `npx uglifyjs` — ensure `node`/`npx` present).

Avoid risky changes

- Don't remove `jekyll-include-cache` from `_config.yml.plugins` — many includes use `include_cached` and will break otherwise.
- Avoid mass reformatting of `_layouts/` or `_includes/` — this theme depends on Liquid conventions and subtle ordering.

If uncertain, inspect these files first

- `_config.yml` — collection definitions and defaults
- `_layouts/publication.html` — example of authors lookup, bib rendering, and expected front-matter keys
- `Rakefile` — dev tasks: `preview`, `js`, `version`, `watch_js`
- `_publications/README.md` and `_people/README.md` — canonical templates for content

When you finish a change

- Run `bundle exec rake preview` and verify the relevant page(s) under `/test/` regenerate without errors.
- If you changed generated assets, run `bundle exec rake` to regenerate derived files (copyright snippets, `assets/js/main.min.js`).

Ask the human when

- A front-matter key seems missing or there are ambiguous person keys.
- You need credentials or external services (analytics, Algolia) — these are not present in the repo and require secrets.

Feedback

If parts of this guidance are unclear or you want examples expanded (e.g., more Liquid snippets), tell me which area to expand.
